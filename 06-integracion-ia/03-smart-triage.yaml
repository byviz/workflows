# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# WORKFLOW: Triage Inteligente con IA
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
name: smart-triage-ai
description: Prioriza y asigna incidentes automÃ¡ticamente con IA
enabled: true
tags: ["ia", "triage", "asignacion"]

triggers:
  - type: alert

steps:
  - name: analizar_incidente
    type: elasticsearch.search
    with:
      index: "logs-*"
      query:
        bool:
          must:
            - match:
                log.level: "ERROR"
          filter:
            - range:
                "@timestamp":
                  gte: "now-10m"
      size: 20
  
  - name: triage_ia
    type: console
    with:
      message: |
        ğŸ¯ TRIAGE INTELIGENTE (simulado)
        
        Total errores: {{steps.analizar_incidente.output.hits.total.value}}
        
        El agente IA determinarÃ­a:
        
        ğŸ“Š PRIORIDAD: HIGH
        RazÃ³n: Spike de errores 300% vs baseline
        
        ğŸ‘¥ EQUIPO ASIGNADO: Backend Team
        RazÃ³n: Errores en API layer, no frontend
        
        ğŸ·ï¸ CATEGORÃA: Performance Degradation
        
        âš¡ URGENCIA: Immediate
        SLA: Respuesta en 30min
        
        ğŸ’¡ CONTEXTO SIMILAR:
        - Incidente #1234 (similar pattern, resuelto con cache flush)
        - Incidente #5678 (mismo servicio, fix: scale up)
        
        ğŸ”§ ACCIONES SUGERIDAS:
        1. Verificar cache redis
        2. Check database connections
        3. Review Ãºltimo deploy si fue en Ãºltimas 2h

