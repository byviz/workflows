# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# WORKFLOW: GuÃ­a Completa de Liquid Templating
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# DescripciÃ³n: Ejemplos exhaustivos de templating con Liquid
# Caso de uso: Aprender sintaxis Liquid para workflows complejos
# Requisitos: Elastic 9.3+
# Autor: IvÃ¡n FrÃ­as Molina - Byviz Analytics
# URL: https://byviz.ai/workflows
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

name: liquid-templating-guide
description: |
  GuÃ­a completa de Liquid templating en Elastic Workflows.
  
  Liquid es el lenguaje de templating usado para:
  - Acceder a variables (inputs, consts, outputs de steps)
  - Interpolar valores dinÃ¡micos
  - Condicionales y loops
  - Filtros y transformaciones
  
  Este workflow cubre:
  âœ“ Variables y acceso a datos
  âœ“ Condicionales (if/elsif/else)
  âœ“ Loops (for)
  âœ“ Filtros comunes
  âœ“ Operadores
  âœ“ Funciones de fecha/string
  
enabled: true
tags: ["basico", "liquid", "templating", "tutorial"]

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
consts:
  app_name: "MiApp"
  version: "2.5.1"
  threshold: 75
  environment: "production"

inputs:
  - name: user_name
    type: string
    default: "admin"
    required: false

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
triggers:
  - type: manual

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
steps:
  # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  # SECCIÃ“N 1: VARIABLES Y ACCESO A DATOS
  # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  
  - name: seccion_1_variables
    type: console
    with:
      message: |
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ğŸ“ SECCIÃ“N 1: VARIABLES Y ACCESO A DATOS
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        1ï¸âƒ£  SINTAXIS BÃSICA - InterpolaciÃ³n simple
        {{consts.app_name}} â†’ Acceder a constante
        {{inputs.user_name}} â†’ Acceder a input
        {{now}} â†’ Timestamp actual
        
        Ejemplos:
        - App: {{consts.app_name}}
        - Usuario: {{inputs.user_name}}
        - Timestamp: {{now}}
        
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        
        2ï¸âƒ£  ACCESO A OBJETOS ANIDADOS
        {{steps.step_name.output.hits.total.value}}
        
        NavegaciÃ³n con puntos:
        - consts.app_name
        - consts.environment
        - consts.version
        
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        
        3ï¸âƒ£  VALORES ACTUALES:
        Constantes definidas:
        - app_name = {{consts.app_name}}
        - version = {{consts.version}}
        - threshold = {{consts.threshold}}
        - environment = {{consts.environment}}
        
        Inputs recibidos:
        - user_name = {{inputs.user_name}}

  # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  # SECCIÃ“N 2: BÃšSQUEDA PARA EJEMPLOS
  # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  
  - name: buscar_datos
    type: elasticsearch.search
    with:
      index: "logs-*"
      query:
        match_all: {}
      size: 5

  # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  # SECCIÃ“N 3: CONDICIONALES (IF/ELSIF/ELSE)
  # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  
  - name: seccion_3_condicionales
    type: console
    with:
      message: |
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ğŸ”€ SECCIÃ“N 3: CONDICIONALES
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        SINTAXIS IF/ELSIF/ELSE:
        {% if condicion %}
          Texto si true
        {% elsif otra_condicion %}
          Texto si segunda condiciÃ³n true
        {% else %}
          Texto si todas false
        {% endif %}
        
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        
        OPERADORES DE COMPARACIÃ“N:
        ==  â†’ igual
        !=  â†’ diferente
        >   â†’ mayor que
        <   â†’ menor que
        >=  â†’ mayor o igual
        <=  â†’ menor o igual
        
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        
        OPERADORES LÃ“GICOS:
        and â†’ AND lÃ³gico
        or  â†’ OR lÃ³gico
        
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        
        EJEMPLOS PRÃCTICOS:
        
        1ï¸âƒ£  ComparaciÃ³n numÃ©rica:
        {% if steps.buscar_datos.output.hits.total.value > 0 %}
        âœ… Se encontraron {{steps.buscar_datos.output.hits.total.value}} documentos
        {% else %}
        âŒ No se encontraron documentos
        {% endif %}
        
        2ï¸âƒ£  ComparaciÃ³n de strings:
        {% if consts.environment == "production" %}
        ğŸ­ Entorno: PRODUCCIÃ“N
        {% elsif consts.environment == "staging" %}
        ğŸ§ª Entorno: STAGING
        {% else %}
        ğŸ’» Entorno: DESARROLLO
        {% endif %}
        
        3ï¸âƒ£  Operadores lÃ³gicos:
        {% if steps.buscar_datos.output.hits.total.value > 0 and consts.environment == "production" %}
        âš ï¸  Datos encontrados en PRODUCCIÃ“N - revisar
        {% else %}
        âœ… SituaciÃ³n normal
        {% endif %}
        
        4ï¸âƒ£  ComparaciÃ³n con constantes:
        {% if steps.buscar_datos.output.hits.total.value >= consts.threshold %}
        ğŸš¨ ALERTA: Supera umbral ({{consts.threshold}})
        {% else %}
        âœ… Dentro de umbrales normales
        {% endif %}

  # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  # SECCIÃ“N 4: LOOPS (FOR)
  # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  
  - name: seccion_4_loops
    type: console
    with:
      message: |
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ğŸ” SECCIÃ“N 4: LOOPS (FOR)
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        SINTAXIS FOR:
        {% for item in array %}
          {{item.propiedad}}
        {% endfor %}
        
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        
        VARIABLES ESPECIALES EN LOOPS:
        - loop.index â†’ Ãndice actual (empieza en 1)
        - loop.index0 â†’ Ãndice actual (empieza en 0)
        - loop.first â†’ true si es primera iteraciÃ³n
        - loop.last â†’ true si es Ãºltima iteraciÃ³n
        - loop.length â†’ Total de elementos
        
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        
        EJEMPLOS:
        
        1ï¸âƒ£  Loop bÃ¡sico sobre resultados:
        {% for hit in steps.buscar_datos.output.hits.hits %}
        [{{loop.index}}] ID: {{hit._id}}
        {% endfor %}
        
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        
        2ï¸âƒ£  Loop con lÃ­mite:
        Primeros 3 documentos:
        {% for hit in steps.buscar_datos.output.hits.hits limit:3 %}
        {{loop.index}}. {{hit._source.message | default: "Sin mensaje"}}
        {% endfor %}
        
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        
        3ï¸âƒ£  Loop con condicionales:
        {% for hit in steps.buscar_datos.output.hits.hits %}
        {% if loop.first %}
        ğŸ¥‡ Primer documento: {{hit._id}}
        {% elsif loop.last %}
        ğŸ Ãšltimo documento: {{hit._id}}
        {% else %}
        ğŸ“„ Documento {{loop.index}}: {{hit._id}}
        {% endif %}
        {% endfor %}
        
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        
        4ï¸âƒ£  Loop vacÃ­o:
        {% for hit in steps.buscar_datos.output.hits.hits %}
        - {{hit._id}}
        {% else %}
        â„¹ï¸  No hay documentos para iterar
        {% endfor %}

  # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  # SECCIÃ“N 5: FILTROS COMUNES
  # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  
  - name: seccion_5_filtros
    type: console
    with:
      message: |
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ğŸ›ï¸  SECCIÃ“N 5: FILTROS
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        Los filtros transforman valores con la sintaxis:
        {{valor | filtro: parametros}}
        
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        
        ğŸ“ FILTROS DE STRING:
        
        upcase â†’ MayÃºsculas
        {{consts.environment | upcase}} = {{consts.environment | upcase}}
        
        downcase â†’ MinÃºsculas
        {{consts.environment | downcase}} = {{consts.environment | downcase}}
        
        capitalize â†’ Primera letra mayÃºscula
        {{consts.environment | capitalize}} = {{consts.environment | capitalize}}
        
        replace â†’ Reemplazar texto
        {{"Hola Mundo" | replace: "Mundo", "Elastic"}} = {{"Hola Mundo" | replace: "Mundo", "Elastic"}}
        
        split â†’ Dividir string
        {{"a,b,c" | split: ","}} â†’ Array [a, b, c]
        
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        
        ğŸ”¢ FILTROS NUMÃ‰RICOS:
        
        plus â†’ Sumar
        {{consts.threshold | plus: 10}} = {{consts.threshold | plus: 10}}
        
        minus â†’ Restar
        {{consts.threshold | minus: 5}} = {{consts.threshold | minus: 5}}
        
        times â†’ Multiplicar
        {{consts.threshold | times: 2}} = {{consts.threshold | times: 2}}
        
        divided_by â†’ Dividir
        {{consts.threshold | divided_by: 3}} = {{consts.threshold | divided_by: 3}}
        
        round â†’ Redondear
        {{33.7 | round}} = 34
        
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        
        ğŸ“… FILTROS DE FECHA:
        
        date â†’ Formatear fecha
        {{now | date: "%Y-%m-%d"}} = {{now | date: "%Y-%m-%d"}}
        {{now | date: "%H:%M:%S"}} = {{now | date: "%H:%M:%S"}}
        {{now | date: "%d/%m/%Y %H:%M"}} = {{now | date: "%d/%m/%Y %H:%M"}}
        
        Formatos:
        - %Y â†’ AÃ±o (2026)
        - %m â†’ Mes (02)
        - %d â†’ DÃ­a (04)
        - %H â†’ Hora 24h (14)
        - %M â†’ Minuto (30)
        - %S â†’ Segundo (45)
        
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        
        ğŸ›¡ï¸  FILTROS DE SEGURIDAD:
        
        default â†’ Valor por defecto si null
        {{variable_inexistente | default: "N/A"}} = {{variable_inexistente | default: "N/A"}}
        
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        
        ğŸ“Š FILTROS DE ARRAYS:
        
        size â†’ TamaÃ±o del array
        Total hits: {{steps.buscar_datos.output.hits.hits | size}}
        
        first â†’ Primer elemento
        last â†’ Ãšltimo elemento
        join â†’ Unir array con separador
        
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        
        ğŸ”— COMBINAR FILTROS:
        {{consts.app_name | upcase | replace: "MI", "TU"}} = {{consts.app_name | upcase | replace: "MI", "TU"}}

  # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  # SECCIÃ“N 6: CASOS DE USO REALES
  # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  
  - name: seccion_6_casos_reales
    type: console
    with:
      message: |
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ğŸ’¼ SECCIÃ“N 6: CASOS DE USO REALES
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        1ï¸âƒ£  REPORTES FORMATEADOS:
        
        ğŸ“Š Reporte de {{consts.app_name}} v{{consts.version}}
        Generado: {{now | date: "%d/%m/%Y a las %H:%M"}}
        Usuario: {{inputs.user_name | upcase}}
        Entorno: {{consts.environment | capitalize}}
        
        Total documentos: {{steps.buscar_datos.output.hits.total.value}}
        Tiempo de bÃºsqueda: {{steps.buscar_datos.output.took}}ms
        
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        
        2ï¸âƒ£  ALERTAS DINÃMICAS:
        
        {% if steps.buscar_datos.output.hits.total.value > consts.threshold %}
        ğŸš¨ ALERTA: {{consts.app_name | upcase}}
        
        Se detectaron {{steps.buscar_datos.output.hits.total.value}} eventos
        Umbral configurado: {{consts.threshold}}
        Exceso: {{steps.buscar_datos.output.hits.total.value | minus: consts.threshold}}
        
        Severidad: {% if steps.buscar_datos.output.hits.total.value > 100 %}CRÃTICA{% else %}MEDIA{% endif %}
        {% endif %}
        
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        
        3ï¸âƒ£  LISTADOS NUMERADOS:
        
        Documentos encontrados:
        {% for hit in steps.buscar_datos.output.hits.hits limit:5 %}
        {{loop.index}}. [{{hit._source.@timestamp | default: "Sin fecha"}}]
           ID: {{hit._id}}
           Ãndice: {{hit._index}}
        {% endfor %}
        
        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        
        4ï¸âƒ£  RESUMEN EJECUTIVO:
        
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  RESUMEN EJECUTIVO                          â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚  AplicaciÃ³n: {{consts.app_name}}
        â”‚  VersiÃ³n: {{consts.version}}
        â”‚  Entorno: {{consts.environment | upcase}}
        â”‚  Fecha: {{now | date: "%Y-%m-%d %H:%M"}}
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚  Documentos analizados: {{steps.buscar_datos.output.hits.total.value}}
        â”‚  Estado: {% if steps.buscar_datos.output.hits.total.value < consts.threshold %}âœ… NORMAL{% else %}âš ï¸  REVISAR{% endif %}
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# CHEATSHEET RÃPIDO
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
# VARIABLES:
#   {{inputs.nombre}}                  â†’ Input
#   {{consts.valor}}                   â†’ Constante
#   {{steps.nombre.output.path}}       â†’ Output de step
#   {{now}}                            â†’ Timestamp actual
#
# CONDICIONALES:
#   {% if condicion %}...{% endif %}
#   {% if x %}...{% elsif y %}...{% else %}...{% endif %}
#
# OPERADORES:
#   ==  !=  >  <  >=  <=              â†’ ComparaciÃ³n
#   and  or                            â†’ LÃ³gicos
#
# LOOPS:
#   {% for item in array %}...{% endfor %}
#   {{loop.index}}                     â†’ Ãndice (1-based)
#   {{loop.first}}                     â†’ Primera iteraciÃ³n
#   {{loop.last}}                      â†’ Ãšltima iteraciÃ³n
#
# FILTROS STRING:
#   | upcase  | downcase  | capitalize
#   | replace: "old", "new"
#   | split: ","
#   | default: "valor"
#
# FILTROS NUMÃ‰RICOS:
#   | plus: 10  | minus: 5
#   | times: 2  | divided_by: 3
#   | round
#
# FILTROS FECHA:
#   | date: "%Y-%m-%d"
#   | date: "%H:%M:%S"
#   | date: "%d/%m/%Y %H:%M"
#
# FILTROS ARRAY:
#   | size  | first  | last
#   | join: ", "
#
# COMBINAR FILTROS:
#   {{valor | filtro1 | filtro2 | filtro3}}
#
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

