# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# PLANTILLA: Workflow de Mantenimiento
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
name: template-maintenance
description: Template base para tareas de mantenimiento
enabled: false
tags: ["template", "maintenance"]

consts:
  target_index: "logs-*"
  retention_days: 30

triggers:
  - type: scheduled
    with:
      every: "7d"  # Semanal (cada 7 dÃ­as) - personalizar

steps:
  # 1. Identificar objetivo
  - name: identificar_target
    type: elasticsearch.search
    with:
      index: "{{consts.target_index}}"
      query:
        range:
          "@timestamp":
            lt: "now-{{consts.retention_days}}d"
      size: 0
  
  # 2. AnÃ¡lisis de impacto
  - name: analizar_impacto
    type: console
    with:
      message: |
        ğŸ“‹ ANÃLISIS DE MANTENIMIENTO
        
        Target: {{consts.target_index}}
        Documentos afectados: {{steps.identificar_target.output.hits.total.value}}
        
        âš ï¸ Revisar antes de ejecutar acciones destructivas
  
  # 3. AcciÃ³n de mantenimiento (simulated)
  - name: ejecutar_mantenimiento
    type: console
    with:
      message: |
        ğŸ› ï¸ MANTENIMIENTO PROGRAMADO
        
        AcciÃ³n: [PERSONALIZAR]
        Estado: Simulado
        
        ğŸ’¡ Implementar:
        - Backup previo
        - Validaciones de seguridad
        - ConfirmaciÃ³n antes de delete
        - Logging de todas las acciones
  
  # 4. VerificaciÃ³n post-acciÃ³n
  - name: verificar_resultado
    type: console
    with:
      message: |
        âœ… VerificaciÃ³n completada
        
        RecomendaciÃ³n: Usar ILM para gestiÃ³n automÃ¡tica de Ã­ndices

